<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Hi - W東方</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="W東方"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="W東方"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="hi"><meta property="og:type" content="article"><meta property="og:title" content="Hi"><meta property="og:url" content="https://520150.xyz/2014/06/01/yun/"><meta property="og:site_name" content="W東方"><meta property="og:description" content="hi"><meta property="og:locale" content="zh_TW"><meta property="og:image" content="https://isgodata.files.wordpress.com/2023/04/e59bbee58fa8e58fa8_20230401_1640260.webp"><meta property="article:published_time" content="2014-06-01T00:00:00.000Z"><meta property="article:modified_time" content="2023-09-06T00:00:00.000Z"><meta property="article:author" content="W東方"><meta property="article:tag" content="搞机"><meta property="article:tag" content="热门"><meta property="article:tag" content="教程"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://isgodata.files.wordpress.com/2023/04/e59bbee58fa8e58fa8_20230401_1640260.webp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://520150.xyz/2014/06/01/yun/"},"headline":"W東方","image":[],"datePublished":"2014-06-01T00:00:00.000Z","dateModified":"2023-09-06T00:00:00.000Z","author":{"@type":"Person","name":"W東方"},"description":"hi"}</script><link rel="canonical" href="https://520150.xyz/2014/06/01/yun/"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="W東方" type="application/atom+xml">
</head><body class="is-1-column"><script type="text/javascript" src="/js/dark.js"></script><nav class="navbar navbar-main"><div class="container"><div class="navbar-menu"><a class="navbar-item navbar-logo" href="/">W東方</a><div class="navbar-end"><a class="navbar-item dark" id="dark-nav" title="Dark Mode" href="javascript:;"><i class="fas fa-moon" id="dark-icon"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="controller"></div><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://isgodata.files.wordpress.com/2023/04/e59bbee58fa8e58fa8_20230401_1640260.webp" alt="Hi"><img class="fill_dark" src="https://isgodata.files.wordpress.com/2023/04/e59bbee58fa8e58fa8_20230401_1640260.webp" alt="Hi"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item create-data"><i class="far fa-calendar-alt">&nbsp;&nbsp;</i><time dateTime="2014-06-01T00:00:00.000Z" title="2014-06-01T00:00:00.000Z">2014-06-01</time>發表</span><span class="level-item cate"><i class="far fa-folder-open">  </i><a class="link-muted" href="/categories/UI%E8%AE%BE%E8%AE%A1/">UI设计</a></span><span class="level-item leancloud_visitors" id="/2014/06/01/yun/" data-flag-title="Hi"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="twikoo_visitors"><i class="fa fa-spinner fa-spin"></i></span>次訪問</span></div></div><h1 class="title is-3 is-size-4-mobile">Hi</h1><div class="content"><blockquote>
<p>腾讯云已经跑路了，挂在腾讯云函数的twikoo已经私有部署了，还剩下一个即刻短文还跑在腾讯云开发的服务上。</p>
<p>找了黑石原来的leancloud方案，主要黑石的公众号是订阅号不是服务号，发起来很麻烦，没有开源无法私有部署。</p>
<p>难道真的要像木木学习魔改Twikoo？</p>
<p>在改友链的时候突然想到为什么不能用与butterfly相同的yml生成方式呢？</p>
<p>这个文章就简单发一下生成逻辑和代码。</p>
<p>本教程仅作为开源使用，需要有一定魔改基础。具体参考<a target="_blank" rel="noopener" href="https://blog.zhheo.com/p/a6947667.html">哔哔</a></p>
<p><strong>即刻短文静态部署版测试中，本文可能会不定时更新。</strong></p>
</blockquote>
<h2 id="什么是即刻短文"><strong>什么是即刻短文</strong></h2>
<p>相比发博客文章需要考虑选题、编写详细的内容，即刻短文可以提供一个快捷的短文字解决方案，避免博客短文章过多造成的整站文章质量下降。</p>
<h2 id="与黑石哔哔有何不同？"><strong>与黑石哔哔有何不同？</strong></h2>
<p>有一个表格介绍一下</p>
<table>
<thead>
<tr>
<th>不同之处</th>
<th>黑石哔哔</th>
<th>即刻短文（静态部署版）</th>
<th>即刻短文（旧版）</th>
</tr>
</thead>
<tbody>
<tr>
<td>部署服务</td>
<td>leancloud动态部署</td>
<td>静态部署</td>
<td>腾讯云动态部署</td>
</tr>
<tr>
<td>费用</td>
<td>免费</td>
<td>免费</td>
<td>首月免费</td>
</tr>
<tr>
<td>服务位置</td>
<td>✅leancloud</td>
<td>✅本地</td>
<td>腾讯云</td>
</tr>
<tr>
<td>发表方式</td>
<td>指定公众号绑定后发布</td>
<td>修改本地yml文件发布</td>
<td>✅get请求</td>
</tr>
<tr>
<td>加载速度</td>
<td>js请求leancloud数据</td>
<td>✅静态html读取</td>
<td>js请求json数据</td>
</tr>
<tr>
<td>支持媒体</td>
<td>图片</td>
<td>✅图片、音乐、链接</td>
<td>图片</td>
</tr>
<tr>
<td>第三方支持</td>
<td>图片灯箱</td>
<td>✅图片灯箱、瀑布流、回复动态、首页滚动</td>
<td>回复动态、首页滚动</td>
</tr>
</tbody>
</table>
<p>创建数据<br>
创建<code>source/_data/essay.yml</code></p>
<p>我这里提供一些示例数据：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">即刻短文</span></span><br><span class="line">  <span class="attr">essay_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">即刻短文用上了木木发的waterfall的js，瀑布流真令人愉悦</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022-08-12</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">iOS16现在感觉已经很稳定了，bug比较少，令人讨厌的就是一个是切换横竖屏抖音和b站都有点问题，然后就是软件请求剪贴板弹窗真的烦</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022-08-12</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">现在即刻短文已经纯本地化部署完成，不再依赖任何第三方服务了</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022-08-12</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">在整理转载文章的时候发现很多文章原文都无法访问了，所以本地保存网页是非常重要的</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022-08-05T06:08:54.978Z</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">content:</span> <span class="string">adguardhome真的不能设置太久的缓存时间，否则非常容易卡和无响应。然后就是注意添加白名单</span></span><br><span class="line">      <span class="attr">date:</span> <span class="number">2022-08-04T10:10:09.984Z</span></span><br></pre></td></tr></table></figure>
<p>创建页面文件<br>
创建**<code>themes/butterfly/layout/includes/page/essay.pug</code>**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.title-and-tips</span><br><span class="line">  h1.page-title(style=&#x27;display: inline;&#x27;)= page.title</span><br><span class="line">  .page-tips 静态部署版</span><br><span class="line">#bber</span><br><span class="line">  section.timeline.page-1</span><br><span class="line">    ul#waterfall.list</span><br><span class="line">      each i in site.data.essay</span><br><span class="line">        each item, index in i.essay_list</span><br><span class="line">          if index &lt; 30</span><br><span class="line">            li.item</span><br><span class="line">              .bber-content</span><br><span class="line">                p.datacont= item.content</span><br><span class="line">                  if item.image</span><br><span class="line">                    a.bber-content-img(href=item.image, target=&quot;_blank&quot;)</span><br><span class="line">                      img(src=item.image)</span><br><span class="line">              .bber-bottom</span><br><span class="line">                .bber-info</span><br><span class="line">                  - var datedata = new Date(item.date).toISOString()</span><br><span class="line">                  time.datatime(datetime= item.date)= datedata</span><br><span class="line">#bber-tips(style=&#x27;color: var(--heo-secondtext);&#x27;)</span><br><span class="line">  | - 只展示最近30条短文 -</span><br></pre></td></tr></table></figure>
<p>创建md文件<br>
创建<code>source/essay/index.md</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 即刻短文</span><br><span class="line">date: 2020-07-22 22:06:17</span><br><span class="line">comments: true</span><br><span class="line">aside: false</span><br><span class="line"><span class="section">type: essay</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<p>修改Page文件<br>
修改<code>themes/butterfly/layout/page.pug</code></p>
<p>在<code>case page.type</code>子项里面添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;essay&#x27;</span><br><span class="line">  include includes/page/essay.pug</span><br></pre></td></tr></table></figure>
<p>首页BB（可选）<br>
创建dom<br>
编辑<code>themes/butterfly/layout/includes/bbTimeList.pug</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#bbTimeList.bbTimeList.container</span><br><span class="line">    i.bber-logo.iconfont.icon-bblogo(onclick=`pjax.loadUrl(&quot;/essay/&quot;)`,title=&quot;即刻短文&quot;,style=&quot;font-size: 2rem;&quot;)</span><br><span class="line">    #bbtalk.swiper-container.swiper-no-swiping(tabindex=&quot;-1&quot;)</span><br><span class="line">      #bber-talk.swiper-wrapper(onclick=`pjax.loadUrl(&quot;/essay/&quot;)`)</span><br><span class="line">        each i in site.data.essay</span><br><span class="line">          each item, index in i.essay_list</span><br><span class="line">            if index &lt; 10</span><br><span class="line">              - var contentText = item.image ? item.content + &#x27; [图片]&#x27; : item.content</span><br><span class="line">              .li-style.swiper-slide= contentText</span><br><span class="line"></span><br><span class="line">    i.bber-gotobb.fas.fa-arrow-circle-right(onclick=`pjax.loadUrl(&quot;/essay/&quot;)`,title=&quot;查看全文&quot;)</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js&#x27;,data-pjax=&#x27;&#x27;)</span><br></pre></td></tr></table></figure>
<p>引入到主页</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">block content</span><br><span class="line">  include ./includes/mixins/post-ui.pug</span><br><span class="line">  #recent-posts.recent-posts</span><br><span class="line">    include includes/categoryList.pug</span><br><span class="line"><span class="addition">+    include includes/bbTimeList.pug</span></span><br><span class="line">    +postUI</span><br><span class="line">    include includes/pagination.pug</span><br></pre></td></tr></table></figure>
<p>引入css<br>
在<code>themes/butterfly/_config.yml</code>中的<code>inject</code>属性的<code>head</code>里添加</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">		<span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css&quot;&gt;</span></span><br><span class="line">		<span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/npm/js-heo@1.0.11/bb/showbb_in_index.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<p>执行js<br>
执行滚动函数，这个可以插入到任意js中，保证每次加载页面执行即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (document.querySelector(&#x27;#bber-talk&#x27;)) &#123;</span><br><span class="line">      var swiper = new Swiper(&#x27;.swiper-container&#x27;, &#123;</span><br><span class="line">        direction: &#x27;vertical&#x27;, // 垂直切换选项</span><br><span class="line">        loop: true,</span><br><span class="line">        autoplay: &#123;</span><br><span class="line">        delay: 3000,</span><br><span class="line">        pauseOnMouseEnter: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>本文转载自张洪Heo</p>
<p>Hexo的Butterfly魔改：即刻短文静态部署版 原文链接：<br>
<a target="_blank" rel="noopener" href="https://blog.zhheo.com/p/557c9e72.html">https://blog.zhheo.com/p/557c9e72.html</a></p>
</div><span class="article-tags is-size-7 last_update"><i class="fas fa-wrench">&nbsp;&nbsp;</i><time dateTime="2023-09-06T00:00:00.000Z" title="2023-09-06T00:00:00.000Z">2023-09-06</time>更新</span><div class="article-tags is-size-7 mb-4"><a class="link-muted mr-2" rel="tag" href="/tags/%E6%90%9E%E6%9C%BA/">搞机</a><a class="link-muted mr-2" rel="tag" href="/tags/%E7%83%AD%E9%97%A8/">热门</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2014/06/01/5g/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">5G速通厅-超多流量卡</span></a></div></nav><!--!--></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">W東方</a><p class="is-size-7"><span>&copy; 2020-2023 W東方</span><br>Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> with <a href="https://github.com/MannyCooper/hexo-theme-candy" target="_blank" rel="noopener">Candy</a><br><i class="fas fa-globe-asia" style=""></i><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn"> 苏ICP备 2020060340 号 </a><br><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32011202000528"><img src="/img/beian.png" style="height: 14px;margin-left: -1px;margin-right: -1px;margin-top: 1.2px;"> 苏公网安备 32011202000528 号</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-TW");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/main.js" defer></script><!--!--></body></html>